---
import { css } from '../../styled-system/css';
import { Menu, X } from 'lucide-astro';

const navLinks = [
  { href: '/our-approach', label: 'Our Approach' },
  { href: '/our-design', label: 'Our Design' },
  { href: '/our-team', label: 'Our Team' },
  { href: '/join-the-team', label: 'Join The Team' },
];

const currentPath = Astro.url.pathname;
---

<nav class={css({
  display: 'flex',
  alignItems: 'center',
  justifyContent: 'space-between',
  px: { base: '4', md: '8', lg: '16' },
  py: '4',
  bg: 'white',
  position: 'relative',
})}>
  <a href="/" class={css({
    fontSize: 'xl',
    fontWeight: '700',
    color: 'gray.800',
    textDecoration: 'none',
    letterSpacing: '-0.02em',
  })}>
    MakerStudio
  </a>

  <!-- Desktop Nav -->
  <div class={css({
    display: { base: 'none', md: 'flex' },
    alignItems: 'center',
    gap: '8',
  })}>
    {navLinks.map(link => (
      <a
        href={link.href}
        class={css({
          fontSize: 'sm',
          fontWeight: '400',
          color: currentPath === link.href ? 'gray.800' : 'gray.500',
          textDecoration: 'none',
          transition: 'color 0.2s',
          _hover: {
            color: 'gray.800',
          },
        })}
      >
        {link.label}
      </a>
    ))}
  </div>

  <!-- Mobile Menu Button -->
  <button
    id="mobile-menu-btn"
    class={css({
      display: { base: 'flex', md: 'none' },
      alignItems: 'center',
      justifyContent: 'center',
      p: '2',
      bg: 'transparent',
      border: 'none',
      cursor: 'pointer',
    })}
    aria-label="Toggle menu"
  >
    <Menu class={css({ w: '6', h: '6' })} id="menu-icon" />
    <X class={css({ w: '6', h: '6', display: 'none' })} id="close-icon" />
  </button>

  <!-- Mobile Menu -->
  <div
    id="mobile-menu"
    class={css({
      display: 'none',
      position: 'absolute',
      top: '100%',
      left: '0',
      right: '0',
      bg: 'white',
      borderTop: '1px solid',
      borderColor: 'gray.100',
      flexDirection: 'column',
      py: '4',
      zIndex: '50',
    })}
  >
    {navLinks.map(link => (
      <a
        href={link.href}
        class={css({
          px: '4',
          py: '3',
          fontSize: 'sm',
          fontWeight: '400',
          color: currentPath === link.href ? 'gray.800' : 'gray.500',
          textDecoration: 'none',
          _hover: {
            bg: 'gray.50',
          },
        })}
      >
        {link.label}
      </a>
    ))}
  </div>
</nav>

<script>
  const btn = document.getElementById('mobile-menu-btn');
  const menu = document.getElementById('mobile-menu');
  const menuIcon = document.getElementById('menu-icon');
  const closeIcon = document.getElementById('close-icon');

  btn?.addEventListener('click', () => {
    const isOpen = menu?.style.display === 'flex';
    if (menu) menu.style.display = isOpen ? 'none' : 'flex';
    if (menuIcon) menuIcon.style.display = isOpen ? 'block' : 'none';
    if (closeIcon) closeIcon.style.display = isOpen ? 'none' : 'block';
  });
</script>
